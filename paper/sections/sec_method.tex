% !TEX root = ../Victorvan Herel2025_Thesis.tex

\chapter{Method / Experimental Design}\label{ch:method}

\section{LLM selection}

\comment{Victor: Describe what OLLama is. Describe why each model was chosen.}
 
\section{Important property: Copyleft clause presence}

We call back to Chapter~\ref{ch:related-work}, where we determined the presence of a copyleft clause, and thus the license family to which a license belongs, as an incredibly powerful indicator for determining further license configuration compatibilities. To put this into practice, a proof of concept is proposed for an experiment to determine a license's family using the license text, a pre-composed query and one of the selected models. We will evaluate this using accuracy, with our ground truth values being taken from the OSADL copyleft table.

\section{Approach}

With the models selected, we simply query the model for each license to obtain its answer to the question: Does this license text contain a copyleft clause?

This allows us to extrapolate from these results and assign the license to a license family. We also have the ability to check this evaluation against a ground truth provided by the OSADL, which allows us to assess an accuracy score for each model. \\

In order to address stochastic behavior which is inherent to large language models, we will query each model multiple times. This thesis has chosen to do this 5 times for each model, to weigh practicality of inference time with results.

The model's decision for a given license can then be retrieved with the majority vote of each run. \\

The query each model is presented with for each run is the following, where the license's text is inserted in the indicated position:

\begin{verbatim}
	=== LICENSE FULL TEXT ===
	
	{license_fulltext}
	
	=== INSTRUCTION ===
	
	You are a license compatibility expert. Does the license contain a copyleft clause?
	A copyleft clause is a provision that requires derivative works to be distributed
	under the same license terms as the original work, ensuring that the freedoms
	granted by the license are preserved in derivative works.
	Begin your answer with a yes or a no for easy parsing.
\end{verbatim}

The license full text used is fetched from the SPDX license database, because of its comprehensive nature and ability to have fetching be fully automated based on SPDX license identifiers~\cite{spdx-licenses}. The SPDX license database is the most comprehensive authority of license texts which are meant for public use. Other tools such as ScanCode and FOSSology use SPDX license identifiers to refer to matched licenses~\cite{scancode-home}\cite{fossology-home}. \\

Lastly we remark that this query poses a yes/no question which limites the LLM to generating binary responses only. This differs from the OSADL dataset described in Chapter~\ref{ch:related-work}, which also includes the option "Questionable". We provide this limiting to the LLM to ensure it provides an answer every time, rather than defaulting to the neutral answer.